<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Calendar Exporter</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide React icons as inline SVGs
        const Calendar = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const Download = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const Upload = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
        );

        const Plus = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const X = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Clock = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const BookOpen = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );

        const Star = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        );

        const FileText = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
        );

        function AcademicCalendar() {
            const [events, setEvents] = useState([]);
            const [showForm, setShowForm] = useState(false);
            const [showImport, setShowImport] = useState(false);
            const [extractedEvents, setExtractedEvents] = useState([]);
            const [syllabusText, setSyllabusText] = useState('');
            const [formData, setFormData] = useState({
                type: 'class',
                title: '',
                description: '',
                date: '',
                startTime: '',
                endTime: '',
                location: '',
                recurrence: 'none',
                daysOfWeek: []
            });

            const eventTypes = {
                class: { label: 'Class', color: 'bg-blue-500', icon: BookOpen },
                homework: { label: 'Homework Due', color: 'bg-orange-500', icon: Clock },
                important: { label: 'Important Date', color: 'bg-purple-500', icon: Star }
            };

            // Parse syllabus text
            const parseSyllabus = (text) => {
                const parsed = [];
                const lines = text.split('\n').map(l => l.trim()).filter(l => l.length > 0);
                
                // Common date patterns
                const datePatterns = [
                    /(\d{1,2}\/\d{1,2}\/\d{2,4})/g,
                    /(\d{1,2}-\d{1,2}-\d{2,4})/g,
                    /(January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{1,2},?\s+\d{4}/gi,
                    /(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Sept|Oct|Nov|Dec)\s+\d{1,2},?\s+\d{4}/gi
                ];

                // Keywords for event types
                const homeworkKeywords = ['homework', 'assignment', 'due', 'submit', 'essay', 'paper', 'project'];
                const examKeywords = ['exam', 'test', 'quiz', 'midterm', 'final'];
                const classKeywords = ['lecture', 'class', 'session', 'meeting', 'fundamentals', 'application', 'introduction'];
                const holidayKeywords = ['holiday', 'break', 'day off', 'no class'];

                // Try to detect table structure (like the syllabus image)
                let isTableFormat = false;
                let sessionCol = -1, dateCol = -1, topicCol = -1, formatCol = -1;
                
                // Look for header row
                for (let i = 0; i < Math.min(5, lines.length); i++) {
                    const line = lines[i].toLowerCase();
                    if (line.includes('session') || line.includes('day') || line.includes('date')) {
                        isTableFormat = true;
                        // Try to identify column positions based on common headers
                        const parts = lines[i].split(/\s{2,}|\t/); // Split by multiple spaces or tabs
                        parts.forEach((part, idx) => {
                            const lower = part.toLowerCase();
                            if (lower.includes('date') || lower.includes('day')) dateCol = idx;
                            if (lower.includes('topic') || lower.includes('title')) topicCol = idx;
                            if (lower.includes('format') || lower.includes('type')) formatCol = idx;
                        });
                        break;
                    }
                }

                if (isTableFormat && dateCol >= 0 && topicCol >= 0) {
                    // Parse table format
                    for (let i = 0; i < lines.length; i++) {
                        const line = lines[i];
                        
                        // Skip headers and empty lines
                        if (line.toLowerCase().includes('session') || 
                            line.toLowerCase().includes('topic') ||
                            line.length < 5) continue;

                        // Split by multiple spaces or tabs
                        const parts = line.split(/\s{2,}|\t/).map(p => p.trim()).filter(p => p.length > 0);
                        
                        if (parts.length < 2) continue;

                        let foundDate = null;
                        let dateStr = null;
                        let title = '';
                        
                        // Try to find date in the line
                        for (let pattern of datePatterns) {
                            const matches = line.match(pattern);
                            if (matches && matches[0]) {
                                dateStr = matches[0];
                                foundDate = parseDate(dateStr);
                                break;
                            }
                        }

                        if (foundDate) {
                            // Extract topic/title
                            if (topicCol < parts.length) {
                                title = parts[topicCol];
                            } else {
                                // Fallback: take everything after the date
                                title = line.split(dateStr)[1] || '';
                                title = title.replace(/\s{2,}/g, ' ').trim();
                            }

                            // Clean up title
                            title = title.replace(/^[-‚Ä¢*:|]\s*/, '').trim();
                            title = title.replace(/\([^)]*\)/g, '').trim(); // Remove parentheses content
                            
                            if (title.length === 0 || title.length > 200) continue;

                            // Determine event type
                            let type = 'class';
                            const lowerLine = line.toLowerCase();
                            const lowerTitle = title.toLowerCase();
                            
                            if (holidayKeywords.some(kw => lowerLine.includes(kw) || lowerTitle.includes(kw))) {
                                continue; // Skip holidays
                            } else if (homeworkKeywords.some(kw => lowerLine.includes(kw) || lowerTitle.includes(kw))) {
                                type = 'homework';
                            } else if (examKeywords.some(kw => lowerLine.includes(kw) || lowerTitle.includes(kw))) {
                                type = 'important';
                            }

                            // Check for format info (Zoom vs In-person)
                            let location = '';
                            if (lowerLine.includes('zoom') || lowerLine.includes('online')) {
                                location = 'Zoom/Online';
                            } else if (lowerLine.includes('in-person') || lowerLine.includes('in person')) {
                                location = 'In-Person';
                            }

                            parsed.push({
                                type,
                                title: title.slice(0, 100),
                                date: foundDate,
                                description: '',
                                startTime: '',
                                endTime: '',
                                location: location,
                                recurrence: 'none',
                                daysOfWeek: []
                            });
                        }
                    }
                } else {
                    // Parse unstructured format (original parser)
                    lines.forEach((line) => {
                        let foundDate = null;
                        let dateStr = null;

                        for (let pattern of datePatterns) {
                            const matches = line.match(pattern);
                            if (matches && matches[0]) {
                                dateStr = matches[0];
                                foundDate = parseDate(dateStr);
                                break;
                            }
                        }

                        if (foundDate) {
                            let type = 'important';
                            const lowerLine = line.toLowerCase();
                            
                            if (holidayKeywords.some(kw => lowerLine.includes(kw))) {
                                return; // Skip holidays
                            } else if (homeworkKeywords.some(kw => lowerLine.includes(kw))) {
                                type = 'homework';
                            } else if (examKeywords.some(kw => lowerLine.includes(kw))) {
                                type = 'important';
                            } else if (classKeywords.some(kw => lowerLine.includes(kw))) {
                                type = 'class';
                            }

                            let title = line.replace(dateStr, '').trim();
                            title = title.replace(/^[-‚Ä¢*:]\s*/, '').trim();
                            
                            if (title.length > 0 && title.length < 200) {
                                parsed.push({
                                    type,
                                    title: title.slice(0, 100),
                                    date: foundDate,
                                    description: '',
                                    startTime: '',
                                    endTime: '',
                                    location: '',
                                    recurrence: 'none',
                                    daysOfWeek: []
                                });
                            }
                        }
                    });
                }

                return parsed;
            };

            const parseDate = (dateStr) => {
                // Handle various date formats
                let date = new Date(dateStr);
                
                if (isNaN(date.getTime())) {
                    // Try parsing MM/DD/YYYY or MM-DD-YYYY
                    const parts = dateStr.split(/[\/\-]/);
                    if (parts.length === 3) {
                        const month = parseInt(parts[0]) - 1;
                        const day = parseInt(parts[1]);
                        let year = parseInt(parts[2]);
                        if (year < 100) year += 2000;
                        date = new Date(year, month, day);
                    }
                }

                if (!isNaN(date.getTime())) {
                    const year = date.getFullYear();
                    const month = String(date.getMonth() + 1).padStart(2, '0');
                    const day = String(date.getDate()).padStart(2, '0');
                    return `${year}-${month}-${day}`;
                }
                
                return '';
            };

            const handleFileUpload = async (e) => {
                const file = e.target.files[0];
                if (!file) return;

                const text = await file.text();
                setSyllabusText(text);
                const parsed = parseSyllabus(text);
                setExtractedEvents(parsed);
            };

            const handleTextPaste = () => {
                const parsed = parseSyllabus(syllabusText);
                setExtractedEvents(parsed);
            };

            const addExtractedEvent = (event) => {
                setEvents(prev => [...prev, { ...event, id: Date.now() + Math.random() }]);
                setExtractedEvents(prev => prev.filter(e => e !== event));
            };

            const addAllExtractedEvents = () => {
                const newEvents = extractedEvents.map(e => ({ ...e, id: Date.now() + Math.random() }));
                setEvents(prev => [...prev, ...newEvents]);
                setExtractedEvents([]);
                setShowImport(false);
            };

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleDayToggle = (day) => {
                setFormData(prev => ({
                    ...prev,
                    daysOfWeek: prev.daysOfWeek.includes(day)
                        ? prev.daysOfWeek.filter(d => d !== day)
                        : [...prev.daysOfWeek, day]
                }));
            };

            const addEvent = () => {
                if (!formData.title || !formData.date) return;
                
                setEvents(prev => [...prev, { ...formData, id: Date.now() }]);
                setFormData({
                    type: 'class',
                    title: '',
                    description: '',
                    date: '',
                    startTime: '',
                    endTime: '',
                    location: '',
                    recurrence: 'none',
                    daysOfWeek: []
                });
                setShowForm(false);
            };

            const deleteEvent = (id) => {
                setEvents(prev => prev.filter(e => e.id !== id));
            };

            const formatICSDate = (dateStr, timeStr) => {
                const date = new Date(dateStr);
                if (timeStr) {
                    const [hours, minutes] = timeStr.split(':');
                    date.setHours(parseInt(hours), parseInt(minutes), 0);
                }
                return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            };

            const generateRecurrenceRule = (event) => {
                if (event.recurrence === 'none') return '';
                
                const freq = event.recurrence.toUpperCase();
                let rule = `RRULE:FREQ=${freq}`;
                
                if (event.recurrence === 'weekly' && event.daysOfWeek.length > 0) {
                    const days = event.daysOfWeek.map(d => d.toUpperCase().slice(0, 2)).join(',');
                    rule += `;BYDAY=${days}`;
                }
                
                rule += ';COUNT=16';
                
                return rule;
            };

            const exportToICS = () => {
                let icsContent = [
                    'BEGIN:VCALENDAR',
                    'VERSION:2.0',
                    'PRODID:-//Academic Calendar//EN',
                    'CALSCALE:GREGORIAN',
                    'METHOD:PUBLISH',
                    'X-WR-CALNAME:Academic Calendar',
                    'X-WR-TIMEZONE:UTC'
                ];

                events.forEach(event => {
                    const dtStart = formatICSDate(event.date, event.startTime);
                    const dtEnd = event.endTime 
                        ? formatICSDate(event.date, event.endTime)
                        : formatICSDate(event.date, event.startTime || '23:59');

                    icsContent.push('BEGIN:VEVENT');
                    icsContent.push(`UID:${event.id}@academiccalendar`);
                    icsContent.push(`DTSTAMP:${formatICSDate(new Date().toISOString().split('T')[0], '00:00')}`);
                    icsContent.push(`DTSTART:${dtStart}`);
                    icsContent.push(`DTEND:${dtEnd}`);
                    icsContent.push(`SUMMARY:${event.title}`);
                    
                    if (event.description) {
                        icsContent.push(`DESCRIPTION:${event.description.replace(/\n/g, '\\n')}`);
                    }
                    
                    if (event.location) {
                        icsContent.push(`LOCATION:${event.location}`);
                    }

                    const recurrenceRule = generateRecurrenceRule(event);
                    if (recurrenceRule) {
                        icsContent.push(recurrenceRule);
                    }

                    icsContent.push('END:VEVENT');
                });

                icsContent.push('END:VCALENDAR');

                const blob = new Blob([icsContent.join('\r\n')], { type: 'text/calendar;charset=utf-8' });
                const url = window.URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'academic_calendar.ics';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                window.URL.revokeObjectURL(url);
            };

            const sortedEvents = [...events].sort((a, b) => new Date(a.date) - new Date(b.date));

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 p-3 sm:p-6">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-xl p-4 sm:p-8 mb-4 sm:mb-6">
                            <div className="mb-6">
                                <div className="flex items-center gap-3 mb-4">
                                    <Calendar className="w-7 h-7 md:w-8 md:h-8 text-indigo-600" />
                                    <h1 className="text-2xl md:text-3xl font-bold text-gray-800">Academic Calendar</h1>
                                </div>
                                <div className="flex flex-col sm:flex-row gap-2 sm:gap-3">
                                    <button
                                        onClick={() => {
                                            setShowImport(!showImport);
                                            setShowForm(false);
                                        }}
                                        className="flex items-center justify-center gap-2 bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition text-base font-medium"
                                    >
                                        <Upload className="w-5 h-5" />
                                        Import Syllabus
                                    </button>
                                    <button
                                        onClick={() => {
                                            setShowForm(!showForm);
                                            setShowImport(false);
                                        }}
                                        className="flex items-center justify-center gap-2 bg-indigo-600 text-white px-4 py-3 rounded-lg hover:bg-indigo-700 transition text-base font-medium"
                                    >
                                        <Plus className="w-5 h-5" />
                                        Add Event
                                    </button>
                                    {events.length > 0 && (
                                        <button
                                            onClick={exportToICS}
                                            className="flex items-center justify-center gap-2 bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition text-base font-medium"
                                        >
                                            <Download className="w-5 h-5" />
                                            Export Calendar
                                        </button>
                                    )}
                                </div>
                            </div>

                            {showImport && (
                                <div className="bg-purple-50 rounded-lg p-4 md:p-6 mb-6 border-2 border-purple-200">
                                    <h2 className="text-lg md:text-xl font-semibold mb-4 text-gray-800">Import Syllabus</h2>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                Upload Syllabus File (.txt, .doc, .pdf)
                                            </label>
                                            <input
                                                type="file"
                                                accept=".txt,.doc,.docx,.pdf"
                                                onChange={handleFileUpload}
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                            />
                                        </div>

                                        <div className="text-center text-sm text-gray-500">OR</div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                Paste Syllabus Text
                                            </label>
                                            <textarea
                                                value={syllabusText}
                                                onChange={(e) => setSyllabusText(e.target.value)}
                                                placeholder="Paste your syllabus text here. Include dates like 'Sept 15, 2024' or '9/15/2024' along with event descriptions..."
                                                rows="6"
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"
                                            />
                                        </div>

                                        <button
                                            onClick={handleTextPaste}
                                            className="w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition font-medium"
                                        >
                                            Extract Events from Text
                                        </button>

                                        {extractedEvents.length > 0 && (
                                            <div className="mt-6">
                                                <div className="flex items-center justify-between mb-3">
                                                    <h3 className="font-semibold text-gray-800">Found {extractedEvents.length} Events</h3>
                                                    <button
                                                        onClick={addAllExtractedEvents}
                                                        className="text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700"
                                                    >
                                                        Add All
                                                    </button>
                                                </div>
                                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                                    {extractedEvents.map((event, idx) => {
                                                        const EventIcon = eventTypes[event.type].icon;
                                                        return (
                                                            <div
                                                                key={idx}
                                                                className="flex items-start gap-3 p-3 bg-white rounded-lg border border-gray-200"
                                                            >
                                                                <div className={`${eventTypes[event.type].color} p-2 rounded-lg flex-shrink-0`}>
                                                                    <EventIcon className="w-4 h-4 text-white" />
                                                                </div>
                                                                <div className="flex-1 min-w-0">
                                                                    <h4 className="font-medium text-sm text-gray-800">{event.title}</h4>
                                                                    <p className="text-xs text-gray-600">
                                                                        {new Date(event.date).toLocaleDateString('en-US', { 
                                                                            weekday: 'short', 
                                                                            month: 'short', 
                                                                            day: 'numeric',
                                                                            year: 'numeric'
                                                                        })}
                                                                    </p>
                                                                </div>
                                                                <button
                                                                    onClick={() => addExtractedEvent(event)}
                                                                    className="text-sm bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700 flex-shrink-0"
                                                                >
                                                                    Add
                                                                </button>
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        )}

                                        <button
                                            onClick={() => setShowImport(false)}
                                            className="w-full px-4 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-base"
                                        >
                                            Close
                                        </button>
                                    </div>
                                </div>
                            )}

                            {showForm && (
                                <div className="bg-gray-50 rounded-lg p-4 md:p-6 mb-6 border-2 border-indigo-200">
                                    <h2 className="text-lg md:text-xl font-semibold mb-4 text-gray-800">Add New Event</h2>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div className="md:col-span-2">
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Event Type</label>
                                            <select
                                                name="type"
                                                value={formData.type}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            >
                                                {Object.entries(eventTypes).map(([key, { label }]) => (
                                                    <option key={key} value={key}>{label}</option>
                                                ))}
                                            </select>
                                        </div>

                                        <div className="md:col-span-2">
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Title *</label>
                                            <input
                                                type="text"
                                                name="title"
                                                value={formData.title}
                                                onChange={handleInputChange}
                                                placeholder="e.g., Math 101 Lecture"
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            />
                                        </div>

                                        <div className="md:col-span-2">
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                            <textarea
                                                name="description"
                                                value={formData.description}
                                                onChange={handleInputChange}
                                                placeholder="Additional details..."
                                                rows="2"
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Date *</label>
                                            <input
                                                type="date"
                                                name="date"
                                                value={formData.date}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Location</label>
                                            <input
                                                type="text"
                                                name="location"
                                                value={formData.location}
                                                onChange={handleInputChange}
                                                placeholder="e.g., Room 204"
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Start Time</label>
                                            <input
                                                type="time"
                                                name="startTime"
                                                value={formData.startTime}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">End Time</label>
                                            <input
                                                type="time"
                                                name="endTime"
                                                value={formData.endTime}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            />
                                        </div>

                                        <div className="md:col-span-2">
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Recurrence</label>
                                            <select
                                                name="recurrence"
                                                value={formData.recurrence}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-3 text-base md:text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                            >
                                                <option value="none">None</option>
                                                <option value="daily">Daily</option>
                                                <option value="weekly">Weekly</option>
                                            </select>
                                        </div>

                                        {formData.recurrence === 'weekly' && (
                                            <div className="md:col-span-2">
                                                <label className="block text-sm font-medium text-gray-700 mb-2">Repeat on Days</label>
                                                <div className="flex gap-2 flex-wrap">
                                                    {['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].map(day => (
                                                        <button
                                                            key={day}
                                                            type="button"
                                                            onClick={() => handleDayToggle(day)}
                                                            className={`px-3 py-1 rounded-lg text-sm font-medium transition ${
                                                                formData.daysOfWeek.includes(day)
                                                                    ? 'bg-indigo-600 text-white'
                                                                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                                            }`}
                                                        >
                                                            {day.slice(0, 3)}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    <div className="flex flex-col sm:flex-row gap-3 mt-6">
                                        <button
                                            onClick={addEvent}
                                            className="flex-1 bg-indigo-600 text-white px-4 py-3 rounded-lg hover:bg-indigo-700 transition font-medium text-base"
                                        >
                                            Add Event
                                        </button>
                                        <button
                                            onClick={() => setShowForm(false)}
                                            className="sm:w-auto px-4 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-base"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            )}

                            {events.length === 0 ? (
                                <div className="text-center py-12">
                                    <Calendar className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                                    <p className="text-gray-500 text-lg">No events yet. Import a syllabus or click "Add Event" to get started!</p>
                                </div>
                            ) : (
                                <div className="space-y-3">
                                    {sortedEvents.map(event => {
                                        const EventIcon = eventTypes[event.type].icon;
                                        return (
                                            <div
                                                key={event.id}
                                                className="flex items-start gap-3 sm:gap-4 p-3 sm:p-4 bg-gray-50 rounded-lg border border-gray-200 hover:shadow-md transition"
                                            >
                                                <div className={`${eventTypes[event.type].color} p-2 rounded-lg flex-shrink-0`}>
                                                    <EventIcon className="w-4 h-4 sm:w-5 sm:h-5 text-white" />
                                                </div>
                                                
                                                <div className="flex-1 min-w-0">
                                                    <div className="flex items-start justify-between gap-2">
                                                        <h3 className="font-semibold text-gray-800 text-sm sm:text-base">{event.title}</h3>
                                                        <button
                                                            onClick={() => deleteEvent(event.id)}
                                                            className="text-gray-400 hover:text-red-500 transition p-1 -m-1"
                                                        >
                                                            <X className="w-5 h-5" />
                                                        </button>
                                                    </div>
                                                    
                                                    <div className="text-xs sm:text-sm text-gray-600 mt-1 space-y-1">
                                                        <p className="flex items-center gap-2">
                                                            <span className="font-medium">
                                                                {new Date(event.date).toLocaleDateString('en-US', { 
                                                                    weekday: 'short', 
                                                                    year: 'numeric', 
                                                                    month: 'short', 
                                                                    day: 'numeric' 
                                                                })}
                                                            </span>
                                                            {event.startTime && (
                                                                <span>‚Ä¢ {event.startTime}{event.endTime ? ` - ${event.endTime}` : ''}</span>
                                                            )}
                                                        </p>
                                                        {event.location && <p>üìç {event.location}</p>}
                                                        {event.description && <p className="text-gray-500">{event.description}</p>}
                                                        {event.recurrence !== 'none' && (
                                                            <p className="text-indigo-600 text-xs">
                                                                üîÑ Repeats {event.recurrence}
                                                                {event.daysOfWeek.length > 0 && ` on ${event.daysOfWeek.map(d => d.slice(0, 3)).join(', ')}`}
                                                            </p>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            )}
                        </div>

                        <div className="bg-blue-50 rounded-lg p-3 sm:p-4 border border-blue-200">
                            <p className="text-xs sm:text-sm text-blue-800">
                                <strong>üí° Tip:</strong> After exporting, open the .ics file with Outlook, Apple Calendar, or Google Calendar to import all your events.
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<AcademicCalendar />, document.getElementById('root'));
    </script>
</body>
</html>
                